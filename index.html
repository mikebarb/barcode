<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <!-- Critical PWA tags for iOS -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Barcode Scanner</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="debug.detection"></div>
    <div id="control-display">  
        <div class="control-title">Control region</div>
        <div class="customDropdown">
            <div class=="dropdownSelected" id="dropdownSelected">
                Select option.
            </div>
            <div class="dropdownOptions" id="dropdownOptions">
                <div class="dropdownOption" data-value="showScan">Scan</div>
                <div class="dropdownOption" data-value="showSearch">Search</div>
                <div class="dropdownOption" data-value="showCheckOut">Check Out</div>
                <div class="dropdownOption" data-value="showSales">Sales</div>
                <div class="dropdownOption" data-value="showStolen">Stolen</div>
                <div class="dropdownOption" data-value="showCheckIn">Check In</div>
            </div>
        </div>
    </div>
    <div id="code-entry-container">
        <div class="code-wrapper">
            <label for="inputCode">Ausil Code entry</label>
            <input type="text" id="inputCode" name="inputCode" placeholder="Enter text or scan barcode" autocomplete="off" autocapitalize="none" autocorrect="off" spellcheck="false">
        </div>
        <div id="code-entry-buttons"> 
            <button id="scanButton" class="controlButton">Scan</button>
            <button id="detailsSearch" class="controlButton" disabled>Search</button>
        </div>
    </div>
    <div id="details-display">
        <h1>Details display</h1>
        <div id="message">This is the message line.</div>
        <div class="numeric-input-container">
            <div class="numeric-input-label">Quantity:</div> 
            <div class="numberic-input-wrapper">
                <button class="numeric-decrement">-</button>
                <input type="text" id="quantityNumbericInput" value="0" inputmode="numeric">
                <button class="numeric-increment">+</button>
            </div>
            <button id="add-item-button">Add</button>
        </div>
        <div id="sale-total">
            <button id="show-discount" class="generic-button">Discount</button>
            <div>Total</div>
            <div id="sale-amount"></div>
            <button id="finalise-purchase" class="generic-button">Purchase</button>
        </div>
        <div id="discount-display">
            <label for = "discount-amount">Discount $</label> 
            <input type="text" id="discount-amount" value="" inputmode="numeric">
            <button id = "discount-add">Add</button>
            <button id = "discount-cancel">exit</button>
        </div>
            <div id="items-to-purchase" class="products-list">
        </div>

        <!-- email - Single line text input with clear and copy buttons -->
        <div class="text-input-container" data-type="single">
            <label for="emailTextInput">eMail:</label>
            <div class="input-wrapper">
                <input type="text" class="text-input" id="emailTextInput" placeholder="Enter email address" data-clearable>
                <div class="input-controls">
                    <button class="control-btn clear-btn" title="Clear">×</button>
                </div>
            </div>
        </div>

        <!-- name - Single line text input with clear and copy buttons -->
        <div class="text-input-container">
            <label for="nameTextInput">Name:</label>
            <div class="input-wrapper">
                <input type="text" class="text-input" id="nameTextInput" placeholder="Enter your name" data-clearable="">
                <div class="input-controls">
                    <button class="control-btn clear-btn" title="Clear">×</button>
                </div>
            </div>
        </div>

        <!-- Multi-line textarea with clear and expand buttons -->
        <div class="text-input-container">
            <label for="commentTextarea">Comment:</label>
            <div class="textarea-wrapper">
                <textarea id="commentTextarea" class="multiline-text-input" rows="2" data-clearable data-expandable
                        placeholder="Enter comments here" 
                        style="resize: vertical;"></textarea>
                <div class="input-controls">
                    <button class="control-btn clear-btn" title="Clear">×</button>
                </div>
            </div>
        </div>

    </div>
    <div id="scan-display">
        <p>Barcode Scanner using QuaggaJS</p>
        <a href="mailto:recipient@example.com?subject=Your Subject&body=Your Message Body">
        Send Email
        </a>
        <div id="scanner-container"></div> <!-- Empty container for Quagga -->
        <div id="error-msg"></div>
        <div id="code">No codes yet.</div>
        <div id="format"> </div>
        <div id="result">Ready to scan. Press Start.</div>
        <div id="scanner-button-container">
            <button id="startButton">Start Scan</button>
            <button id="pauseButton" disabled>Pause</button>
            <button id="stopButton" disabled>Stop</button>
        </div>
    </div>

    <!-- Load QuaggaJS from a CDN 
    <script src="https://unpkg.com/quagga@0.12.1/dist/quagga.min.js"></script>
    -->
    <script src="quagga.js"></script>
    <!-- <script src="sheets-client.js"></script>  -->
    <script src="scanner.js"></script>
    <script type="module" src="main.js"></script>
</body>
</html>
