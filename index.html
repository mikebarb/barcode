<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <!-- Critical PWA tags for iOS -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Barcode Scanner</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="debug.detection"></div>
    <div id="control-display">
        <div id="control-row">
            <div class="customDropdown">
                <div class="dropdownSelected" id="dropdownSelected">
                    Select option
                </div>
                <div class="dropdownOptions" id="dropdownOptions">
                    <div class="dropdownOption" data-value="showSales">Sales</div>
                    <div class="dropdownOption" data-value="showPurchases">Purchases</div>
                    <div class="dropdownOption" data-value="showSold">Sold</div>
                    <div class="dropdownOption" data-value="showScan">Scan</div>
                    <div class="dropdownOption" data-value="showSettings">Settings</div>
                </div>
            </div>
            <button id="upload-sales" class="controlButton">Upload</button>
            <button id="download-stock" class="controlButton">Download</button>
        </div>
        <div id="message">This is the message line.</div>
    </div>
    <div id="code-entry-container">
        <div class="code-wrapper">
            <label for="inputCode">Ausil Code entry</label>
            <input type="text" id="inputCode" name="inputCode" placeholder="Enter text or scan barcode" autocomplete="off" autocapitalize="none" autocorrect="off" spellcheck="false">
        </div>
        <div id="details-wrapper">
            <div id="details-cost"></div>
            <div id="details-description"></div>
        </div>
        <div id="code-entry-buttons"> 
            <button id="scanButton" class="controlButton">Scan</button>
            <button id="detailsSearch" class="controlButton">Search</button>
        </div>
    </div>
    <div id="search-container">
        <div id = "search-input-area">
            <label for="search-input">Search for:</label>
            <input type="text" id="search-input" name="search-input" placeholder="Enter text" autocomplete="off" autocapitalize="none" autocorrect="off" spellcheck="false">
        </div>
        <div id = "search-display-area" class = "search-results">
        </div>
    </div>
    <div id="details-display">
        <div class="numeric-input-container">
            <div class="numeric-input-label">Quantity:</div> 
            <div class="numberic-input-wrapper">
                <button class="numeric-decrement">-</button>
                <input type="text" id="quantityNumbericInput" value="1" inputmode="numeric">
                <button class="numeric-increment">+</button>
            </div>
            <button id="add-item-button">Add</button>
        </div>
        <div id="sale-total">
            <button id="show-discount" class="generic-button">Discount</button>
            <div>Total</div>
            <div id="sale-amount"></div>
            <button id="finalise-purchase" class="generic-button">Purchase</button>
        </div>
        <div id="discount-display">
            <label for = "discount-amount">Discount $</label> 
            <input type="text" id="discount-amount" value="" inputmode="numeric">
            <button id = "discount-add">Add</button>
            <button id = "discount-cancel">exit</button>
        </div>
            <div id="items-to-purchase" class="products-list">
        </div>
        <!-- type of sale - drop down list -->
        <div class="customDropdown">
                <div class="dropdownSelected" id="dropdownSaleType">
                    Select option.
                </div>
                <div class="dropdownOptions" id="dropdownSaleTypeOptions">
                    <div class="dropdownOption" data-value="cash">Cash</div>
                    <div class="dropdownOption" data-value="eftpos">EFTPOS</div>
                    <div class="dropdownOption" data-value="etransfer">E-Transfer</div>
                    <div class="dropdownOption" data-value="ministry">Ministry</div>
                    <div class="dropdownOption" data-value="pr">PR</div>
                    <div class="dropdownOption" data-value="account">Account</div>
                </div>
        </div>

        <!-- email - Single line text input with clear and copy buttons -->
        <div class="text-input-container" data-type="single">
            <label for="emailTextInput">eMail:</label>
            <div class="input-wrapper">
                <input type="email" class="text-input" id="emailTextInput" placeholder="Enter email address" data-clearable>
                <div class="input-controls">
                    <button class="control-btn clear-btn" title="Clear">×</button>
                </div>
            </div>
        </div>

        <!-- name - Single line text input with clear and copy buttons -->
        <div class="text-input-container">
            <label for="nameTextInput">Name:</label>
            <div class="input-wrapper">
                <input type="text" class="text-input" id="nameTextInput" placeholder="Enter your name" data-clearable="">
                <div class="input-controls">
                    <button class="control-btn clear-btn" title="Clear">×</button>
                </div>
            </div>
        </div>

        <!-- Multi-line textarea with clear and expand buttons -->
        <div class="text-input-container">
            <label for="commentTextarea">Comment:</label>
            <div class="textarea-wrapper">
                <textarea id="commentTextarea" class="multiline-text-input" rows="2" data-clearable data-expandable
                        placeholder="Enter comments here" 
                        style="resize: vertical;"></textarea>
                <div class="input-controls">
                    <button class="control-btn clear-btn" title="Clear">×</button>
                </div>
            </div>
        </div>

    </div>
    <div id="scan-display">
        <p>Barcode Scanner using QuaggaJS</p>
        <div id="scanner-container"></div> <!-- Empty container for Quagga -->
        <div id="error-msg"></div>
        <div id="code">No codes yet.</div>
        <div id="format"> </div>
        <div id="result">Ready to scan. Press Start.</div>
        <div id="scanner-button-container">
            <button id="startButton">Start Scan</button>
            <button id="pauseButton" disabled>Pause</button>
            <button id="stopButton" disabled>Stop</button>
        </div>
    </div>

    <div id="purchases-display" class="products-list">
        <h1>Purchases</h1>
        <div id="purchases-container"></div> <!-- Empty container for sold items -->
    </div>

    <div id="sold-display" class="products-list">
        <h1>Sold Items</h1>
        <div id="sold-container"></div> <!-- Empty container for sold items -->
    </div>

    <div id="settings-display">
        <h1>Settings</h1>
        <!-- Spreadsheet URL - Single line text input -->
        <div class="text-input-container">
            <label for="settingsSpreadSheetUrlInput">Spreadsheet URL:</label>
            <div class="input-wrapper">
                <input type="text" class="text-input" id="settingsSpreadSheetUrlInput" placeholder="SpreadSheetUrl" data-clearable="">
                <div class="settings-controls">
                    <button id="settingsAddSpreadSheetUrl" class="settings-btn" title="Update">Update SpreadSheet Url</button>
                </div>
            </div>
        </div>
        <!-- Device Id - Single line text input -->
        <div class="text-input-container">
            <label for="settingsDeviceIdInput">Spreadsheet URL:</label>
            <div class="input-wrapper">
                <input type="text" class="text-input" id="settingsDeviceIdInput" placeholder="DeviceId" data-clearable="">
                <div class="settings-controls">
                    <button id="settingsAddDeviceId" class="settings-btn" title="Update">Update Device Id</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Load QuaggaJS from a CDN 
    <script src="https://unpkg.com/quagga@0.12.1/dist/quagga.min.js"></script>
    -->
    <script src="quagga.js"></script>
    <!-- <script src="sheets-client.js"></script>  -->
    <script src="scanner.js"></script>
    <script type="module" src="main.js"></script>
</body>
</html>
